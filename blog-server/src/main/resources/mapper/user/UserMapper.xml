<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.xxx.user.mapper.UserMapper">
   <insert id="addUser">
      insert into tb_user(user_name, real_name, phone, email, salt, password, avatar, remark, logininfo_id) values (
         #{userName},
         #{realName},
         #{phone},
         #{email},
         #{salt},
         #{password},
         #{avatar},
         #{remark},
         #{logininfoId}
      )
   </insert>

   <update id="updateUser">
      update tb_user set
         user_name=#{userName},
         real_name=#{realName},
         phone=#{phone},
         email=#{email},
         salt=#{salt},
         password=#{password},
         avatar=#{avatar},
         remark=#{remark},
         logininfo_id=#{logininfoId}
      where id=#{id}
   </update>

   <delete id="deleteUser">
      delete from tb_user where id=#{id}
   </delete>

   <delete id="batchUsers">
      delete from tb_user where id in
      <foreach collection="array" item="id" open="(" separator="," close=")">
          #{id}
      </foreach>
   </delete>

   <select id="findAll" resultType="User">
      select * from tb_user
   </select>

   <select id="findOne" resultType="User">
      select * from tb_user where id=#{id}
   </select>

   <select id="queryPage" resultType="User">
      select * from tb_user
      <where>
         <if test="keyword!=null and keyword!=''">
            user_name like concat('%',#{keyword},'%')
            or
            real_name like concat('%',#{keyword},'%')
         </if>
      </where>
   </select>
</mapper>